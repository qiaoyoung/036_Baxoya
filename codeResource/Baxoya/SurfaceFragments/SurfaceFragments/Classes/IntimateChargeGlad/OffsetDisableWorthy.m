
#import <Foundation/Foundation.h>

NSString *StringFromCandidData(Byte *data);        


//: 查看红包
Byte commonDeployNumber[] = {18, 12, 61, 10, 5, 201, 207, 10, 102, 164, 169, 98, 104, 170, 95, 78, 170, 125, 101, 168, 79, 72, 220};

//: normal
Byte layoutMountError[] = {59, 6, 19, 11, 205, 24, 15, 189, 51, 142, 126, 91, 92, 95, 90, 78, 89, 176};

//: pressed
Byte moduleCurrentResultNumber[] = {80, 7, 7, 7, 231, 26, 85, 105, 107, 94, 108, 108, 94, 93, 52};

//: 领取红包
Byte styleThemeTailPath[] = {94, 12, 84, 9, 77, 9, 115, 187, 253, 149, 78, 50, 145, 59, 66, 147, 102, 78, 145, 56, 49, 110};

//: NIMDemoEventNameOpenRedPacket
Byte modulePressureFleetConfig[] = {42, 29, 23, 7, 184, 1, 199, 55, 50, 54, 45, 78, 86, 88, 46, 95, 78, 87, 93, 55, 74, 86, 78, 56, 89, 78, 87, 59, 78, 77, 57, 74, 76, 84, 78, 93, 157};

//: isaccept
Byte appDarkFormat[] = {31, 8, 9, 13, 132, 31, 2, 157, 201, 238, 96, 220, 254, 96, 106, 88, 90, 90, 92, 103, 107, 73};

//: data
Byte componentUnityTitle[] = {14, 4, 1, 11, 238, 36, 57, 138, 133, 6, 246, 99, 96, 115, 96, 233};

//: redid
Byte styleSpanResource[] = {65, 5, 33, 14, 116, 160, 33, 3, 37, 126, 107, 205, 252, 238, 81, 68, 67, 72, 67, 238};

//: icon_redpacket_
Byte componentGrowingName[] = {31, 15, 75, 4, 30, 24, 36, 35, 20, 39, 26, 25, 37, 22, 24, 32, 26, 41, 20, 240};

//: from_
Byte layoutFirmResource[] = {76, 5, 20, 11, 232, 71, 45, 38, 46, 117, 149, 82, 94, 91, 89, 75, 32};

//: icon_redpacket_custom
Byte constLedgeKindFormat[] = {40, 21, 22, 14, 198, 238, 15, 205, 178, 191, 110, 25, 74, 29, 83, 77, 89, 88, 73, 92, 79, 78, 90, 75, 77, 85, 79, 94, 73, 77, 95, 93, 94, 89, 87, 24};

//: /wallet/isAcceptRed
Byte viewObserverStemPath[] = {57, 19, 97, 8, 200, 120, 221, 123, 206, 22, 0, 11, 11, 4, 19, 206, 8, 18, 224, 2, 2, 4, 15, 19, 241, 4, 3, 101};

// __DEBUG__
// __CLOSE_PRINT__
//
//  OffsetDisableWorthy.m
//  NIM
//
//  Created by chris on 2017/7/17.
//  Copyright © 2017年 Netease. All rights reserved.
//

// __M_A_C_R_O__
//: #import "OffsetDisableWorthy.h"
#import "OffsetDisableWorthy.h"
//: #import "ReorderRoleStitchTupleExecute.h"
#import "ReorderRoleStitchTupleExecute.h"
//: #import "ElevatedNativeRecoverAllocator.h"
#import "ElevatedNativeRecoverAllocator.h"
//: #import "WavyReactiveHaloDisclaimer.h"
#import "WavyReactiveHaloDisclaimer.h"

//: @interface OffsetDisableWorthy()
@interface OffsetDisableWorthy()

//: @property (nonatomic, strong) UILabel *subTitleLabel;
@property (nonatomic, strong) UILabel *easyArchitecture;

//: @property (nonatomic, strong) UILabel *descLabel;
@property (nonatomic, strong) UILabel *pan;

//: @property (nonatomic, strong) UITapGestureRecognizer *tap;
@property (nonatomic, strong) UITapGestureRecognizer *feedback;

//: @property (nonatomic ,strong) UIImageView *redPacketImage;
@property (nonatomic ,strong) UIImageView *creativeRes;

//: @property (nonatomic, strong) UILabel *titleLabel;
@property (nonatomic, strong) UILabel *owl;

//: @property (nonatomic, strong) UIView *whiteView;
@property (nonatomic, strong) UIView *flat;

//: @end
@end

//: @implementation OffsetDisableWorthy
@implementation OffsetDisableWorthy

//: #pragma mark - 系统父类方法
#pragma mark - 系统父类方法
//: - (void)refresh:(SplitPortDuplicateSlice*)data{
- (void)operation:(SplitPortDuplicateSlice*)data{
    //: [super refresh:data];
    [super operation:data];

    //: NIMCustomObject *object = data.message.messageObject;
    NIMCustomObject *object = data.mActive.messageObject;
    //: ReorderRoleStitchTupleExecute *attachment = (ReorderRoleStitchTupleExecute *)object.attachment;
    ReorderRoleStitchTupleExecute *attachment = (ReorderRoleStitchTupleExecute *)object.attachment;

    //: self.titleLabel.text = attachment.title;
    self.owl.text = attachment.actual;
    //: self.descLabel.text = attachment.content;
    self.pan.text = attachment.leap;

    //: self.titleLabel.textColor = [UIColor lightGrayColor];
    self.owl.textColor = [UIColor lightGrayColor];
    //: self.subTitleLabel.textColor = [UIColor whiteColor];
    self.easyArchitecture.textColor = [UIColor whiteColor];
    //: self.descLabel.textColor = [UIColor whiteColor];
    self.pan.textColor = [UIColor whiteColor];

    //: [self.titleLabel sizeToFit];
    [self.owl sizeToFit];
    //: CGRect rect = self.titleLabel.frame;
    CGRect rect = self.owl.frame;
    //: if (CGRectGetMaxX(rect) > self.bounds.size.width)
    if (CGRectGetMaxX(rect) > self.bounds.size.width)
    {
        //: rect.size.width = self.bounds.size.width - rect.origin.x - 20;
        rect.size.width = self.bounds.size.width - rect.origin.x - 20;
        //: self.titleLabel.frame = rect;
        self.owl.frame = rect;
    }
    //: self.subTitleLabel.text = self.model.message.isOutgoingMsg? @"查看红包".user_localized : @"领取红包".user_localized;
    self.easyArchitecture.text = self.blue.mActive.isOutgoingMsg? StringFromCandidData(commonDeployNumber).nativeDown : StringFromCandidData(styleThemeTailPath).nativeDown;

    //: NSMutableDictionary *dict = @{}.mutableCopy;
    NSMutableDictionary *dict = @{}.mutableCopy;
    //: dict[@"redid"] = attachment.redPacketId;
    dict[StringFromCandidData(styleSpanResource)] = attachment.brainPort;
    //: [ElevatedNativeRecoverAllocator getWithUrl:[NSString stringWithFormat:@"/wallet/isAcceptRed"] params:dict isShow:NO success:^(id responseObject) {
    [ElevatedNativeRecoverAllocator opinion:[NSString stringWithFormat:StringFromCandidData(viewObserverStemPath)] greatBy:dict quantityeract:NO monster:^(id responseObject) {
        //: NSDictionary *resultDict = (NSDictionary *)responseObject;
        NSDictionary *resultDict = (NSDictionary *)responseObject;
        //: NSDictionary *dataDict = [resultDict valueObjectForKey:@"data"];
        NSDictionary *dataDict = [resultDict his:StringFromCandidData(componentUnityTitle)];
        //: NSString *isaccept = [dataDict newStringValueForKey:@"isaccept"];
        NSString *isaccept = [dataDict soft:StringFromCandidData(appDarkFormat)];
        //: if (isaccept.integerValue == 0) {
        if (isaccept.integerValue == 0) {
            //: _whiteView.hidden = YES;
            _flat.hidden = YES;
        //: }else{
        }else{
            //: _whiteView.hidden = NO;
            _flat.hidden = NO;
        }
    //: } failed:^(id responseObject, NSError *error) {
    } provisionDoing:^(id responseObject, NSError *error) {

    //: }];
    }];
}


//: - (void)layoutSubviews
- (void)layoutSubviews
{
    //: [super layoutSubviews];
    [super layoutSubviews];
    //: _redPacketImage.frame = CGRectMake(0, 0, 160, 180);
    _creativeRes.frame = CGRectMake(0, 0, 160, 180);
    //: _whiteView.frame = CGRectMake(0, 0, 160, 180);
    _flat.frame = CGRectMake(0, 0, 160, 180);

    //: BOOL outgoing = self.model.message.isOutgoingMsg;
    BOOL outgoing = self.blue.mActive.isOutgoingMsg;
    //: if (outgoing)
    if (outgoing)
    {
        //: self.descLabel.frame = CGRectMake(12.0f+31.f+12.f, 17.f, 160.f, 24.f);
        self.pan.frame = CGRectMake(12.0f+31.f+12.f, 17.f, 160.f, 24.f);
        //: self.subTitleLabel.frame = CGRectMake(12.0f+31.f+12.f, 39.f, 150.f, 20.f);
        self.easyArchitecture.frame = CGRectMake(12.0f+31.f+12.f, 39.f, 150.f, 20.f);
        //: self.titleLabel.frame = CGRectMake(7.0f, 93.f-18.f, 180.f, 21.f);
        self.owl.frame = CGRectMake(7.0f, 93.f-18.f, 180.f, 21.f);
    }
    //: else
    else
    {
        //: self.descLabel.frame = CGRectMake(12.f+31.f+12.f, 17.f, 160.f, 24.f);
        self.pan.frame = CGRectMake(12.f+31.f+12.f, 17.f, 160.f, 24.f);
        //: self.subTitleLabel.frame = CGRectMake(12.f+31.f+12.f, 39.f, 150.f, 20.f);
        self.easyArchitecture.frame = CGRectMake(12.f+31.f+12.f, 39.f, 150.f, 20.f);
        //: self.titleLabel.frame = CGRectMake(14.f, 93.f-18.f, 180.f, 21.f);
        self.owl.frame = CGRectMake(14.f, 93.f-18.f, 180.f, 21.f);
    }
}

//: - (instancetype)initSessionMessageContentView{
- (instancetype)initDefiniteAcross{
    //: self = [super initSessionMessageContentView];
    self = [super initDefiniteAcross];
    //: if (self) {
    if (self) {
        // 内容布局
//        _titleLabel = [[UILabel alloc] initWithFrame:CGRectZero];
//        _titleLabel.font = [UIFont systemFontOfSize:12.f];
//        _subTitleLabel = [[UILabel alloc] initWithFrame:CGRectZero];
//        _subTitleLabel.font = [UIFont systemFontOfSize:12.f];
//        _descLabel = [[UILabel alloc] initWithFrame:CGRectZero];
//        _descLabel.font = [UIFont systemFontOfSize:13.f];

        //: _redPacketImage = [[UIImageView alloc] init];
        _creativeRes = [[UIImageView alloc] init];
        //: _redPacketImage.clipsToBounds = YES;
        _creativeRes.clipsToBounds = YES;
        //: _redPacketImage.contentMode = UIViewContentModeScaleAspectFill;
        _creativeRes.contentMode = UIViewContentModeScaleAspectFill;
        //: _redPacketImage.image = [UIImage imageNamed:@"icon_redpacket_custom"];
        _creativeRes.image = [UIImage imageNamed:StringFromCandidData(constLedgeKindFormat)];
        //: _redPacketImage.layer.masksToBounds = YES;
        _creativeRes.layer.masksToBounds = YES;
        //: _redPacketImage.layer.cornerRadius = 10;
        _creativeRes.layer.cornerRadius = 10;

        //: _whiteView = [[UIView alloc] init];
        _flat = [[UIView alloc] init];
        //: _whiteView.userInteractionEnabled = NO;
        _flat.userInteractionEnabled = NO;
        //: _whiteView.backgroundColor = [UIColor whiteColor];
        _flat.backgroundColor = [UIColor whiteColor];
        //: _whiteView.alpha = 0.5;
        _flat.alpha = 0.5;
        //: _whiteView.hidden = YES;
        _flat.hidden = YES;

        //: self.bubbleImageView.hidden = YES;
        self.library.hidden = YES;

        //: [self addSubview:_redPacketImage];
        [self addSubview:_creativeRes];
        //: [self addSubview:_titleLabel];
        [self addSubview:_owl];
        //: [self addSubview:_subTitleLabel];
        [self addSubview:_easyArchitecture];
        //: [self addSubview:_descLabel];
        [self addSubview:_pan];
        //: [self addSubview:_whiteView];
        [self addSubview:_flat];

    }
    //: return self;
    return self;
}

//: - (void)onTouchUpInside:(id)sender
- (void)versionned:(id)sender
{
    //: if ([self.delegate respondsToSelector:@selector(onCatchEvent:)]) {
    if ([self.amendPartses respondsToSelector:@selector(necessaries:)]) {
        //: ZoneOnyxOpal *event = [[ZoneOnyxOpal alloc] init];
        ZoneOnyxOpal *event = [[ZoneOnyxOpal alloc] init];
        //: event.eventName = @"NIMDemoEventNameOpenRedPacket";
        event.package = StringFromCandidData(modulePressureFleetConfig);
        //: event.messageModel = self.model;
        event.reject = self.blue;
        //: event.data = self;
        event.dry = self;
        //: [self.delegate onCatchEvent:event];
        [self.amendPartses necessaries:event];
    }
}

//: - (UIImage *)chatBubbleImageForState:(UIControlState)state outgoing:(BOOL)outgoing
- (UIImage *)enhance:(UIControlState)state skilled:(BOOL)outgoing
{
    //: NSString *stateString = state == UIControlStateNormal? @"normal" : @"pressed";
    NSString *stateString = state == UIControlStateNormal? StringFromCandidData(layoutMountError) : StringFromCandidData(moduleCurrentResultNumber);
    //: NSString *imageName = @"icon_redpacket_";
    NSString *imageName = StringFromCandidData(componentGrowingName);
    //: if (outgoing)
    if (outgoing)
    {
        //: imageName = [imageName stringByAppendingString:@"from_"];
        imageName = [imageName stringByAppendingString:StringFromCandidData(layoutFirmResource)];
    }
    //: else
    else
    {
        //: imageName = [imageName stringByAppendingString:@"to_"];
        imageName = [imageName stringByAppendingString:@"to_"];
    }
    //: imageName = [imageName stringByAppendingString:stateString];
    imageName = [imageName stringByAppendingString:stateString];
    //: return [UIImage imageNamed:imageName];
    return [UIImage imageNamed:imageName];
}

//: @end
@end

Byte * CandidDataToCache(Byte *data) {
    int duringDialog = data[0];
    int solid = data[1];
    Byte fluentLibrary = data[2];
    int watchFigure = data[3];
    if (!duringDialog) return data + watchFigure;
    for (int i = watchFigure; i < watchFigure + solid; i++) {
        int value = data[i] + fluentLibrary;
        if (value > 255) {
            value -= 256;
        }
        data[i] = value;
    }
    data[0] = 0;
    data[watchFigure + solid] = 0;
    return data + watchFigure;
}

NSString *StringFromCandidData(Byte *data) {
    return [NSString stringWithUTF8String:(char *)CandidDataToCache(data)];
}
