
#import <Foundation/Foundation.h>
typedef struct {
    Byte resolvePositive;
    Byte *spaceChapter;
    unsigned int buildFilter;
    Byte eliteYear;
	int pleasedCheckShore;
	int optionTransit;
} TailData;

NSString *StringFromTailData(TailData *data);


//: text/html
TailData viewReportNumber = (TailData){100, (Byte []){16, 1, 28, 16, 75, 12, 16, 9, 8, 145}, 9, 251, 232, 232};

//: xiaokaapi.com
TailData moduleSplitPath = (TailData){170, (Byte []){210, 195, 203, 197, 193, 203, 203, 218, 195, 132, 201, 197, 199, 49}, 13, 253, 37, 111};

//: %@.mp4
TailData componentOntoEstimatePlatform = (TailData){95, (Byte []){122, 31, 113, 50, 47, 107, 74}, 6, 210, 148, 89};

//: video/mp4
TailData globalProtectLoopValue = (TailData){151, (Byte []){225, 254, 243, 242, 248, 184, 250, 231, 163, 236}, 9, 195, 23, 6};

//: langs
TailData layoutPropertyPreference = (TailData){157, (Byte []){241, 252, 243, 250, 238, 207}, 5, 216, 115, 255};

//: png
TailData globalShapePath = (TailData){230, (Byte []){150, 136, 129, 10}, 3, 157, 208, 181};

//: yyyyMMddHHmmss
TailData styleMagicThinAlert = (TailData){177, (Byte []){200, 200, 200, 200, 252, 252, 213, 213, 249, 249, 220, 220, 194, 194, 170}, 14, 152, 153, 255};

//: %@.jpg
TailData userResumePreference = (TailData){70, (Byte []){99, 6, 104, 44, 54, 33, 201}, 6, 232, 140, 173};

//: text/javascript
TailData styleSternSpringPath = (TailData){26, (Byte []){110, 127, 98, 110, 53, 112, 123, 108, 123, 105, 121, 104, 115, 106, 110, 23}, 15, 172, 253, 145};

//: systemSetting
TailData constConstructSubmitPath = (TailData){146, (Byte []){225, 235, 225, 230, 247, 255, 193, 247, 230, 230, 251, 252, 245, 31}, 13, 212, 244, 234};

//: AppKey
TailData screenToolPath = (TailData){30, (Byte []){95, 110, 110, 85, 123, 103, 254}, 6, 201, 74, 184};

//: jpg
TailData kElevatorHelper = (TailData){221, (Byte []){183, 173, 186, 246}, 3, 167, 255, 202};

//: cer
TailData styleClusterEverydayEvent = (TailData){24, (Byte []){123, 125, 106, 166}, 3, 247, 187, 30};

//: lang
TailData layoutClipRealmTimer = (TailData){207, (Byte []){163, 174, 161, 168, 152}, 4, 229, 24, 23};

//: text/plain
TailData viewCircuitError = (TailData){247, (Byte []){131, 146, 143, 131, 216, 135, 155, 150, 158, 153, 80}, 10, 231, 154, 65};

//: application/json
TailData globalMediaFormat = (TailData){202, (Byte []){171, 186, 186, 166, 163, 169, 171, 190, 163, 165, 164, 229, 160, 185, 165, 164, 173}, 16, 185, 60, 130};

//: Nonce
TailData globalRoyalValue = (TailData){92, (Byte []){18, 51, 50, 63, 57, 204}, 5, 225, 161, 234};

//: token
TailData viewWillingExceptionString = (TailData){21, (Byte []){97, 122, 126, 112, 123, 212}, 5, 159, 149, 205};

//: video
TailData userHillTimer = (TailData){112, (Byte []){6, 25, 20, 21, 31, 79}, 5, 175, 4, 128};

//: Download
TailData viewToolTimer = (TailData){255, (Byte []){187, 144, 136, 145, 147, 144, 158, 155, 80}, 8, 241, 47, 67};

//: CurTime
TailData layoutStructurePath = (TailData){164, (Byte []){231, 209, 214, 240, 205, 201, 193, 80}, 7, 206, 38, 233};

//: picture
TailData k_reverseUniversalTimer = (TailData){75, (Byte []){59, 34, 40, 63, 62, 57, 46, 10}, 7, 199, 92, 85};

//: http
TailData userEndlessKey = (TailData){188, (Byte []){212, 200, 200, 204, 147}, 4, 253, 45, 179};

//: image/%@
TailData screenFabricPlatform = (TailData){167, (Byte []){206, 202, 198, 192, 194, 136, 130, 231, 143}, 8, 163, 89, 217};

//: text/json
TailData moduleEnsureEvent = (TailData){201, (Byte []){189, 172, 177, 189, 230, 163, 186, 166, 167, 140}, 9, 202, 182, 69};

//: ismustmobile
TailData commonPowerEvent = (TailData){56, (Byte []){81, 75, 85, 77, 75, 76, 85, 87, 90, 81, 84, 93, 31}, 12, 241, 77, 254};

//: image
TailData layoutPullHelper = (TailData){234, (Byte []){131, 135, 139, 141, 143, 50}, 5, 198, 155, 74};

//: image/jpg
TailData themeOutputPlatform = (TailData){182, (Byte []){223, 219, 215, 209, 211, 153, 220, 198, 209, 56}, 9, 254, 204, 217};

//: loginip
TailData constPageDecentName = (TailData){138, (Byte []){230, 229, 237, 227, 228, 227, 250, 71}, 7, 205, 112, 197};

//: gif
TailData k_softReportResource = (TailData){18, (Byte []){117, 123, 116, 75}, 3, 178, 138, 12};

//: appSetting
TailData kPassageModeMessage = (TailData){128, (Byte []){225, 240, 240, 211, 229, 244, 244, 233, 238, 231, 33}, 10, 190, 220, 151};

//: CheckSum
TailData appAcceptEvent = (TailData){59, (Byte []){120, 83, 94, 88, 80, 104, 78, 86, 244}, 8, 199, 84, 99};

// __DEBUG__
// __CLOSE_PRINT__
//
//  ElevatedNativeRecoverAllocator.m
//  ZCBusinessCar
//
//  Created by peng on 2021/2/24.
//

// __M_A_C_R_O__
//: #import "ElevatedNativeRecoverAllocator.h"
#import "ElevatedNativeRecoverAllocator.h"
//: #import<CommonCrypto/CommonDigest.h>
#import<CommonCrypto/CommonDigest.h>
//: #import "UploadHoldViaCluster.h"
#import "UploadHoldViaCluster.h"
//: #import "WavyReactiveHaloDisclaimer.h"
#import "WavyReactiveHaloDisclaimer.h"

//: @interface ElevatedNativeRecoverAllocator ()
@interface ElevatedNativeRecoverAllocator ()

//: @property (nonatomic,strong) AFHTTPSessionManager *manager;
@property (nonatomic,strong) AFHTTPSessionManager *relatedLoose;

//: @end
@end

//: @implementation ElevatedNativeRecoverAllocator
@implementation ElevatedNativeRecoverAllocator

//: + (void)uploadImagesWithURL:(NSString *)URL
+ (void)totalerval:(NSString *)URL
                 //: parameters:(id)parameters
                 collector:(id)parameters
                     //: images:(NSArray<NSData *> *)images
                     accept:(NSArray<NSData *> *)images
                   //: progress:(HttpProgress)progress
                   given:(HttpProgress)progress
                    //: success:(ResponseSuccess)success
                    add:(ResponseSuccess)success
                     //: failed:(ResponseFailed)failed{
                     save:(ResponseFailed)failed{

    //: if (![URL containsString:@"http"]){
    if (![URL containsString:StringFromTailData(&userEndlessKey)]){
        //: URL = RestApi(URL);
        URL = preciseImage(URL);
    }

    //: AFHTTPSessionManager *manager = [ElevatedNativeRecoverAllocator sharedManager].manager;
    AFHTTPSessionManager *manager = [ElevatedNativeRecoverAllocator thoroughWealthy].relatedLoose;
    //: NSString *lang = emptyString([GestureSubscribeDropHero standardUserDefaults].language);
    NSString *lang = soundFound([GestureSubscribeDropHero available].grainChecker);
    //: [manager.requestSerializer setValue:lang forHTTPHeaderField:@"lang"];
    [manager.bareLined recognize:lang water:StringFromTailData(&layoutClipRealmTimer)];
    //: NSString *systemLanguage = [[NSLocale preferredLanguages] firstObject];
    NSString *systemLanguage = [[NSLocale preferredLanguages] firstObject];
    //: [manager.requestSerializer setValue:systemLanguage forHTTPHeaderField:@"langs"];
    [manager.bareLined recognize:systemLanguage water:StringFromTailData(&layoutPropertyPreference)];

    //: NSURLSessionDataTask *t = [manager POST:URL parameters:parameters headers:nil constructingBodyWithBlock:^(id<AFMultipartFormData> _Nonnull formData) {
    NSURLSessionDataTask *t = [manager seek:URL random:parameters inspector:nil hourDownSpecial:^(id<AFMultipartFormData> _Nonnull formData) {
        //: for (NSUInteger i = 0; i < images.count; i++) {
        for (NSUInteger i = 0; i < images.count; i++) {
            //NSData *imageData = UIImageJPEGRepresentation(images[i], 0.5);// 图片经过等比压缩后得到的二进制文件
            //: NSData *imageData = images[i];
            NSData *imageData = images[i];

            //: NSString *timeSp = [NSString stringWithFormat:@"%ld", (long)[[NSDate date] timeIntervalSince1970]];
            NSString *timeSp = [NSString stringWithFormat:@"%ld", (long)[[NSDate date] timeIntervalSince1970]];

            //: NSString *imageTypeSuffix = @"jpg";
            NSString *imageTypeSuffix = StringFromTailData(&kElevatorHelper);
            //: SDImageFormat imageType = [NSData sd_imageFormatForImageData:imageData];
            SDImageFormat imageType = [NSData sd_imageFormatForImageData:imageData];
            //: switch (imageType) {
            switch (imageType) {
                //: case SDImageFormatJPEG:
                case SDImageFormatJPEG:
                    //: imageTypeSuffix = @"jpg";
                    imageTypeSuffix = StringFromTailData(&kElevatorHelper);
                    //: break;
                    break;
                //: case SDImageFormatPNG:
                case SDImageFormatPNG:
                    //: imageTypeSuffix = @"png";
                    imageTypeSuffix = StringFromTailData(&globalShapePath);
                    //: break;
                    break;
                //: case SDImageFormatGIF:
                case SDImageFormatGIF:
                    //: imageTypeSuffix = @"gif";
                    imageTypeSuffix = StringFromTailData(&k_softReportResource);
                    //: break;
                    break;
                //: default:
                default:
                    //: break;
                    break;
            }
            //: NSString *fileName = [NSString stringWithFormat:@"%@%ld.%@",timeSp,i,imageTypeSuffix];
            NSString *fileName = [NSString stringWithFormat:@"%@%ld.%@",timeSp,i,imageTypeSuffix];
            //: NSString *mimeType = [NSString stringWithFormat:@"image/%@",imageTypeSuffix];
            NSString *mimeType = [NSString stringWithFormat:StringFromTailData(&screenFabricPlatform),imageTypeSuffix];
//            NSString *mimeType = @"video/mp4";
            //: [formData appendPartWithFileData:imageData name:@"image" fileName:fileName mimeType:mimeType];
            [formData gravity:imageData via:StringFromTailData(&layoutPullHelper) manEvaluate:fileName beforeWithoutCreate:mimeType];
        }
    //: } progress:^(NSProgress * _Nonnull uploadProgress) {
    } planGraph:^(NSProgress * _Nonnull uploadProgress) {
        //: if (progress) {
        if (progress) {
            //: progress(uploadProgress);
            progress(uploadProgress);
        }
    //: } success:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) {
    } belowError:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) {

        //: success ? success(responseObject) : nil;
        success ? success(responseObject) : nil;
    //: } failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) {
    } precious:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) {
        //: failed ? failed(nil ,error) : nil;
        failed ? failed(nil ,error) : nil;
    //: }];
    }];

    //: [[ElevatedNativeRecoverAllocator sharedManager] addTask:t];
    [[ElevatedNativeRecoverAllocator thoroughWealthy] among:t];
}

//: + (void)uploadImagesWithURL:(NSString *)URL
+ (void)core:(NSString *)URL
                 //: parameters:(id)parameters
                 passAdd:(id)parameters
                       //: name:(NSString *)name
                       team:(NSString *)name
                     //: images:(NSArray<UIImage *> *)images
                     recover:(NSArray<UIImage *> *)images
                  //: fileNames:(NSArray<NSString *> *)fileNames
                  everyRecent:(NSArray<NSString *> *)fileNames
                 //: imageScale:(CGFloat)imageScale
                 frame:(CGFloat)imageScale
                  //: imageType:(NSString *)imageType
                  ledge:(NSString *)imageType
                   //: progress:(HttpProgress)progress
                   minimalByHydrate:(HttpProgress)progress
                    //: success:(ResponseSuccess)success
                    natural:(ResponseSuccess)success
                     //: failed:(ResponseFailed)failed{
                     cliff:(ResponseFailed)failed{

    //: AFHTTPSessionManager *manager = [ElevatedNativeRecoverAllocator sharedManager].manager;
    AFHTTPSessionManager *manager = [ElevatedNativeRecoverAllocator thoroughWealthy].relatedLoose;
    //: NSURLSessionDataTask *t = [manager POST:URL parameters:parameters headers:nil constructingBodyWithBlock:^(id<AFMultipartFormData> _Nonnull formData) {
    NSURLSessionDataTask *t = [manager seek:URL random:parameters inspector:nil hourDownSpecial:^(id<AFMultipartFormData> _Nonnull formData) {

        //: for (NSUInteger i = 0; i < images.count; i++) {
        for (NSUInteger i = 0; i < images.count; i++) {
            //: NSData *imageData = UIImageJPEGRepresentation(images[i], imageScale ?: 1.f);
            NSData *imageData = UIImageJPEGRepresentation(images[i], imageScale ?: 1.f);// 图片经过等比压缩后得到的二进制文件
            //: NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
            NSDateFormatter *formatter = [[NSDateFormatter alloc] init];// 默认图片的文件名, 若fileNames为nil就使用
            //: formatter.dateFormat = @"yyyyMMddHHmmss";
            formatter.dateFormat = StringFromTailData(&styleMagicThinAlert);
            //: NSString *str = [formatter stringFromDate:[NSDate date]];
            NSString *str = [formatter stringFromDate:[NSDate date]];
            //: NSString *imageFileName = [NSString stringWithFormat:@"%@%ld.%@",str,i,imageType?:@"jpg"];
            NSString *imageFileName = [NSString stringWithFormat:@"%@%ld.%@",str,i,imageType?:StringFromTailData(&kElevatorHelper)];

            //: NSString *fileName = fileNames ? [NSString stringWithFormat:@"%@.%@",fileNames[i],imageType?:@"jpg"] : imageFileName;
            NSString *fileName = fileNames ? [NSString stringWithFormat:@"%@.%@",fileNames[i],imageType?:StringFromTailData(&kElevatorHelper)] : imageFileName;
            //: NSString *mimeType = [NSString stringWithFormat:@"image/%@",imageType ?: @"jpg"];
            NSString *mimeType = [NSString stringWithFormat:StringFromTailData(&screenFabricPlatform),imageType ?: StringFromTailData(&kElevatorHelper)];
            //: [formData appendPartWithFileData:imageData name:name fileName:fileName mimeType:mimeType];
            [formData gravity:imageData via:name manEvaluate:fileName beforeWithoutCreate:mimeType];
        }
    //: } progress:^(NSProgress * _Nonnull uploadProgress) {
    } planGraph:^(NSProgress * _Nonnull uploadProgress) {
        //: if (progress) {
        if (progress) {
            //: progress(uploadProgress);
            progress(uploadProgress);
        }
    //: } success:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) {
    } belowError:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) {
        //: success ? success(responseObject) : nil;
        success ? success(responseObject) : nil;
    //: } failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) {
    } precious:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) {
        //: failed ? failed(nil ,error) : nil;
        failed ? failed(nil ,error) : nil;
    //: }];
    }];

    //: [[ElevatedNativeRecoverAllocator sharedManager] addTask:t];
    [[ElevatedNativeRecoverAllocator thoroughWealthy] among:t];
}

//: #pragma mark - 管理请求队列
#pragma mark - 管理请求队列


//: - (void)addTask:(NSURLSessionDataTask *)task{
- (void)among:(NSURLSessionDataTask *)task{
    //: NSMutableDictionary *taskQueue = [self taskQueue];
    NSMutableDictionary *taskQueue = [self compose];

    //: [taskQueue setObject:task forKey:@([NSDate date].timeIntervalSince1970)];
    [taskQueue setObject:task forKey:@([NSDate date].timeIntervalSince1970)];
}

//: - (void)removeTask:(NSURLSessionDataTask *)task{
- (void)alongsideAcross:(NSURLSessionDataTask *)task{
    //: if ([self ifRequesting]) {
    if ([self spaceOpen]) {
        //: NSMutableDictionary *taskQueue = [self taskQueue];
        NSMutableDictionary *taskQueue = [self compose];

        //: [taskQueue removeObjectForKey:@([NSDate date].timeIntervalSince1970)];
        [taskQueue removeObjectForKey:@([NSDate date].timeIntervalSince1970)];
    }
}

//: + (void)postWithUrl: (NSString *)urlStr
+ (void)stick: (NSString *)urlStr
             //: params: (NSDictionary *)params
             yard: (NSDictionary *)params
             //: isShow: (BOOL)isShow
             genuine: (BOOL)isShow
          //: cacheTime: (int)cacheDuration
          muse: (int)cacheDuration
        //: mustResrush: (BOOL)mustResrush
        strikeOn: (BOOL)mustResrush
            //: success: (ResponseSuccess)success
            off: (ResponseSuccess)success
             //: failed: (ResponseFailed)failed{
             engineActive: (ResponseFailed)failed{
    //: AFHTTPSessionManager *manager = [ElevatedNativeRecoverAllocator sharedManager].manager;
    AFHTTPSessionManager *manager = [ElevatedNativeRecoverAllocator thoroughWealthy].relatedLoose;
//    manager.requestSerializer = [AFJSONRequestSerializer serializer];

    //添加请求头
    //: NSString *loginToken = [GestureSubscribeDropHero standardUserDefaults].loginToken;
    NSString *loginToken = [GestureSubscribeDropHero available].joinBarPage;
    //: NSString *lang = emptyString([GestureSubscribeDropHero standardUserDefaults].language);
    NSString *lang = soundFound([GestureSubscribeDropHero available].grainChecker);
    //: [manager.requestSerializer setValue:lang forHTTPHeaderField:@"lang"];
    [manager.bareLined recognize:lang water:StringFromTailData(&layoutClipRealmTimer)];
    //: NSString *systemLanguage = [[NSLocale preferredLanguages] firstObject];
    NSString *systemLanguage = [[NSLocale preferredLanguages] firstObject];
    //: [manager.requestSerializer setValue:systemLanguage forHTTPHeaderField:@"langs"];
    [manager.bareLined recognize:systemLanguage water:StringFromTailData(&layoutPropertyPreference)];

     //: if ([GestureSubscribeDropHero standardUserDefaults].loginToken.length > 0) {
     if ([GestureSubscribeDropHero available].joinBarPage.length > 0) {

        //: [manager.requestSerializer setValue:loginToken forHTTPHeaderField:@"token"];
        [manager.bareLined recognize:loginToken water:StringFromTailData(&viewWillingExceptionString)];
    }

    //: NSURLSessionDataTask *task = [manager POST:urlStr parameters:params headers:nil progress:^(NSProgress * _Nonnull uploadProgress) {
    NSURLSessionDataTask *task = [manager needScenarioPrompt:urlStr disable:params execute:nil modify:^(NSProgress * _Nonnull uploadProgress) {

    //: } success:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) {
    } comparisonUponPlayer:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) {
         //: success(responseObject);
         success(responseObject);
    //: } failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) {
    } asSunny:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) {
        //: failed(nil ,error);
        failed(nil ,error);
    //: }];
    }];
    //: [[ElevatedNativeRecoverAllocator sharedManager] addTask:task];
    [[ElevatedNativeRecoverAllocator thoroughWealthy] among:task];
}

/**
 *https验证
 */
//: + (AFSecurityPolicy *)customSecurityPolicy {
+ (AFSecurityPolicy *)general {
    // /先导入证书
    //: NSString *cerPath = [[NSBundle mainBundle] pathForResource:@"xiaokaapi.com" ofType:@"cer"]; 
    NSString *cerPath = [[NSBundle mainBundle] pathForResource:StringFromTailData(&moduleSplitPath) ofType:StringFromTailData(&styleClusterEverydayEvent)]; //证书的路径
    //: NSData *certData = [NSData dataWithContentsOfFile:cerPath];
    NSData *certData = [NSData dataWithContentsOfFile:cerPath];
    // AFSSLPinningModeCertificate 使用证书验证模式
    //: AFSecurityPolicy *securityPolicy = [AFSecurityPolicy policyWithPinningMode:AFSSLPinningModePublicKey];
    AFSecurityPolicy *securityPolicy = [AFSecurityPolicy tab:AFSSLPinningModePublicKey];

    // allowInvalidCertificates 是否允许无效证书（也就是自建的证书），默认为NO
    // 如果是需要验证自建证书，需要设置为YES
    //: securityPolicy.allowInvalidCertificates = NO;
    securityPolicy.bravePressured = NO;

    //validatesDomainName 是否需要验证域名，默认为YES；
    //假如证书的域名与你请求的域名不一致，需把该项设置为NO；如设成NO的话，即服务器使用其他可信任机构颁发的证书，也可以建立连接，这个非常危险，建议打开。
    //置为NO，主要用于这种情况：客户端请求的是子域名，而证书上的是另外一个域名。因为SSL证书上的域名是独立的，假如证书上注册的域名是www.google.com，那么mail.google.com是无法验证通过的；当然，有钱可以注册通配符的域名*.google.com，但这个还是比较贵的。
    //如置为NO，建议自己添加对应域名的校验逻辑。
    //: securityPolicy.validatesDomainName = YES;
    securityPolicy.commandTwisted = YES;
    //: securityPolicy.pinnedCertificates = [NSSet setWithArray:@[certData]];
    securityPolicy.minuteCurrented = [NSSet setWithArray:@[certData]];
    //: return securityPolicy;
    return securityPolicy;
}

//: - (BOOL)ifRequesting{
- (BOOL)spaceOpen{
//    NSMutableDictionary *taskDic = objc_getAssociatedObject(self, @selector(addTask:));
//
//    if (taskDic && taskDic.allKeys.count>0) {
//        return YES;
//    }
    //: return NO;
    return NO;
}

//: + (NSString *)getNowTimeTimestamp{
+ (NSString *)star{

    //: NSDate *datenow = [NSDate date];
    NSDate *datenow = [NSDate date];
    //: NSTimeZone *zone = [NSTimeZone localTimeZone];
    NSTimeZone *zone = [NSTimeZone localTimeZone];
  // 获取指定时间所在时区与UTC时区的间隔秒数
  //: NSInteger seconds = [zone secondsFromGMTForDate:[NSDate date]];
  NSInteger seconds = [zone secondsFromGMTForDate:[NSDate date]];
  //: NSString *timeSp = [NSString stringWithFormat:@"%ld", (long)[datenow timeIntervalSince1970] - seconds];
  NSString *timeSp = [NSString stringWithFormat:@"%ld", (long)[datenow timeIntervalSince1970] - seconds];
  //: return timeSp;
  return timeSp;
}

//sha1加密方式
//: + (NSString *)sha1:(NSString *)input
+ (NSString *)jungle:(NSString *)input
{
    //const char *cstr = [input cStringUsingEncoding:NSUTF8StringEncoding];
    //NSData *data = [NSData dataWithBytes:cstr length:input.length];

     //: NSData *data = [input dataUsingEncoding:NSUTF8StringEncoding];
     NSData *data = [input dataUsingEncoding:NSUTF8StringEncoding];
    //: uint8_t digest[20];
    uint8_t digest[20];

    //: CC_SHA1(data.bytes, (unsigned int)data.length, digest);
    CC_SHA1(data.bytes, (unsigned int)data.length, digest);
    //: NSMutableString *output = [NSMutableString stringWithCapacity:20 * 2];
    NSMutableString *output = [NSMutableString stringWithCapacity:20 * 2];
    //: for(int i=0; i<20; i++) {
    for(int i=0; i<20; i++) {
        //: [output appendFormat:@"%02x", digest[i]];
        [output appendFormat:@"%02x", digest[i]];
    }

    //: return output;
    return output;
}

//: + (void)uploadImagesWithURL:(NSString *)URL
+ (void)top:(NSString *)URL
                 //: parameters:(id)parameters
                 willing:(id)parameters
                     //: images:(NSArray<NSData *> *)images
                     under:(NSArray<NSData *> *)images
                 //: imageNames:(NSArray<NSString *> *)imageNames
                 hero:(NSArray<NSString *> *)imageNames
                   //: progress:(HttpProgress)progress
                   lake:(HttpProgress)progress
                    //: success:(ResponseSuccess)success
                    petCorner:(ResponseSuccess)success
                     //: failed:(ResponseFailed)failed{
                     eventProperty:(ResponseFailed)failed{

    //: if (![URL containsString:@"http"]){
    if (![URL containsString:StringFromTailData(&userEndlessKey)]){
        //: URL = RestApi(URL);
        URL = preciseImage(URL);
    }

    //: AFHTTPSessionManager *manager = [ElevatedNativeRecoverAllocator sharedManager].manager;
    AFHTTPSessionManager *manager = [ElevatedNativeRecoverAllocator thoroughWealthy].relatedLoose;
    //: NSURLSessionDataTask *t = [manager POST:URL parameters:parameters headers:nil constructingBodyWithBlock:^(id<AFMultipartFormData> _Nonnull formData) {
    NSURLSessionDataTask *t = [manager seek:URL random:parameters inspector:nil hourDownSpecial:^(id<AFMultipartFormData> _Nonnull formData) {
        //: for (NSUInteger i = 0; i < images.count; i++) {
        for (NSUInteger i = 0; i < images.count; i++) {
            //NSData *imageData = UIImageJPEGRepresentation(images[i], 0.5);// 图片经过等比压缩后得到的二进制文件
            //: NSData *imageData = images[i];
            NSData *imageData = images[i];

            //: NSString *timeSp = [NSString stringWithFormat:@"%ld", (long)[[NSDate date] timeIntervalSince1970]];
            NSString *timeSp = [NSString stringWithFormat:@"%ld", (long)[[NSDate date] timeIntervalSince1970]];

            //: NSString *imageTypeSuffix = @"jpg";
            NSString *imageTypeSuffix = StringFromTailData(&kElevatorHelper);
            //: SDImageFormat imageType = [NSData sd_imageFormatForImageData:imageData];
            SDImageFormat imageType = [NSData sd_imageFormatForImageData:imageData];
            //: switch (imageType) {
            switch (imageType) {
                //: case SDImageFormatJPEG:
                case SDImageFormatJPEG:
                    //: imageTypeSuffix = @"jpg";
                    imageTypeSuffix = StringFromTailData(&kElevatorHelper);
                    //: break;
                    break;
                //: case SDImageFormatPNG:
                case SDImageFormatPNG:
                    //: imageTypeSuffix = @"png";
                    imageTypeSuffix = StringFromTailData(&globalShapePath);
                    //: break;
                    break;
                //: case SDImageFormatGIF:
                case SDImageFormatGIF:
                    //: imageTypeSuffix = @"gif";
                    imageTypeSuffix = StringFromTailData(&k_softReportResource);
                    //: break;
                    break;
                //: default:
                default:
                    //: break;
                    break;
            }
            //: NSString *fileName = [NSString stringWithFormat:@"%@%ld.%@",timeSp,i,imageTypeSuffix];
            NSString *fileName = [NSString stringWithFormat:@"%@%ld.%@",timeSp,i,imageTypeSuffix];
            //: NSString *mimeType = [NSString stringWithFormat:@"image/%@",imageTypeSuffix];
            NSString *mimeType = [NSString stringWithFormat:StringFromTailData(&screenFabricPlatform),imageTypeSuffix];
//            NSString *mimeType = @"video/mp4";

            //: NSString *name = [imageNames objectAtIndex:i] ? :@"image";
            NSString *name = [imageNames objectAtIndex:i] ? :StringFromTailData(&layoutPullHelper);
            //: [formData appendPartWithFileData:imageData name:name fileName:fileName mimeType:mimeType];
            [formData gravity:imageData via:name manEvaluate:fileName beforeWithoutCreate:mimeType];
        }
    //: } progress:^(NSProgress * _Nonnull uploadProgress) {
    } planGraph:^(NSProgress * _Nonnull uploadProgress) {
        //: if (progress) {
        if (progress) {
            //: progress(uploadProgress);
            progress(uploadProgress);
        }
    //: } success:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) {
    } belowError:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) {

        //: success ? success(responseObject) : nil;
        success ? success(responseObject) : nil;
    //: } failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) {
    } precious:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) {
        //: failed ? failed(nil ,error) : nil;
        failed ? failed(nil ,error) : nil;
    //: }];
    }];

    //: [[ElevatedNativeRecoverAllocator sharedManager] addTask:t];
    [[ElevatedNativeRecoverAllocator thoroughWealthy] among:t];
}

//: + (void)downloadWithURL:(NSString *)URL
+ (void)oval:(NSString *)URL
                //: fileDir:(NSString *)fileDir
                overSafelyAccent:(NSString *)fileDir
               //: progress:(HttpProgress)progress
               compute:(HttpProgress)progress
                //: success:(void(^)(NSString *filePath))success
                enableeMist:(void(^)(NSString *filePath))success
                 //: failed:(ResponseFailed)failed{
                 written:(ResponseFailed)failed{


    //: if (![URL containsString:@"http"]){
    if (![URL containsString:StringFromTailData(&userEndlessKey)]){
        //: URL = RestApi(URL);
        URL = preciseImage(URL);
    }

    //: NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:URL]];
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:URL]];
    //: AFHTTPSessionManager *manager = [ElevatedNativeRecoverAllocator sharedManager].manager;
    AFHTTPSessionManager *manager = [ElevatedNativeRecoverAllocator thoroughWealthy].relatedLoose;
    //: NSURLSessionDownloadTask *downloadTask = [manager downloadTaskWithRequest:request progress:^(NSProgress * _Nonnull downloadProgress) {
    NSURLSessionDownloadTask *downloadTask = [manager disappear:request shade:^(NSProgress * _Nonnull downloadProgress) {
        //: if (progress) {
        if (progress) {
            //: progress(downloadProgress);
            progress(downloadProgress);
        }
    //: } destination:^NSURL * _Nonnull(NSURL * _Nonnull targetPath, NSURLResponse * _Nonnull response) {
    } transformGiven:^NSURL * _Nonnull(NSURL * _Nonnull targetPath, NSURLResponse * _Nonnull response) {
        //拼接缓存目录
        //: NSString *downloadDir = [[NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject] stringByAppendingPathComponent:fileDir ? fileDir : @"Download"];
        NSString *downloadDir = [[NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject] stringByAppendingPathComponent:fileDir ? fileDir : StringFromTailData(&viewToolTimer)];
        //打开文件管理器
        //: NSFileManager *fileManager = [NSFileManager defaultManager];
        NSFileManager *fileManager = [NSFileManager defaultManager];
        //创建Download目录
        //: [fileManager createDirectoryAtPath:downloadDir withIntermediateDirectories:YES attributes:nil error:nil];
        [fileManager createDirectoryAtPath:downloadDir withIntermediateDirectories:YES attributes:nil error:nil];
        //拼接文件路径
        //: NSString *filePath = [downloadDir stringByAppendingPathComponent:response.suggestedFilename];
        NSString *filePath = [downloadDir stringByAppendingPathComponent:response.suggestedFilename];
        //返回文件位置的URL路径
        //: return [NSURL fileURLWithPath:filePath];
        return [NSURL fileURLWithPath:filePath];
    //: } completionHandler:^(NSURLResponse * _Nonnull response, NSURL * _Nullable filePath, NSError * _Nullable error) {
    } person:^(NSURLResponse * _Nonnull response, NSURL * _Nullable filePath, NSError * _Nullable error) {
        //: if(failed && error) {failed(nil ,error) ; return ;};
        if(failed && error) {failed(nil ,error) ; return ;};
        //: success ? success(filePath.absoluteString /|** NSURL->NSString*|/) : nil;
        success ? success(filePath.absoluteString /** NSURL->NSString*/) : nil;
    //: }];
    }];
    //: [downloadTask resume];
    [downloadTask resume];
}


//: + (void)postWithUrl: (NSString *)urlStr
+ (void)pine: (NSString *)urlStr
           //: checksum: (NSString *)checksum
           along: (NSString *)checksum
              //: nonce: (NSString *)nonce
              recognizeDense: (NSString *)nonce
            //: CurTime: (NSString *)CurTime
            recentBold: (NSString *)CurTime
             //: params: (NSDictionary *)params
             passageBlend: (NSDictionary *)params
            //: success: (ResponseSuccess)success
            smooth: (ResponseSuccess)success
             //: failed: (ResponseFailed)failed
             framework: (ResponseFailed)failed
{
    //: AFHTTPSessionManager *manager = [ElevatedNativeRecoverAllocator sharedManager].manager;
    AFHTTPSessionManager *manager = [ElevatedNativeRecoverAllocator thoroughWealthy].relatedLoose;

    //添加请求头
    //: NSString *appKey = [[UploadHoldViaCluster sharedConfig] appKey];
    NSString *appKey = [[UploadHoldViaCluster image] fineLeaf];
    //: [manager.requestSerializer setValue:appKey forHTTPHeaderField:@"AppKey"];
    [manager.bareLined recognize:appKey water:StringFromTailData(&screenToolPath)];
//    NSString *nonce = [NSString stringWithFormat:@"%d",arc4random() % 100 ];
    //: [manager.requestSerializer setValue:nonce forHTTPHeaderField:@"Nonce"];
    [manager.bareLined recognize:nonce water:StringFromTailData(&globalRoyalValue)];
//    NSString *time = [self getNowTimeTimestamp];
    //: [manager.requestSerializer setValue:CurTime forHTTPHeaderField:@"CurTime"];
    [manager.bareLined recognize:CurTime water:StringFromTailData(&layoutStructurePath)];
//    NSString *CheckSums = [self sha1:[NSString stringWithFormat:@"%@%@%@",appKey,nonce,time]];
    //: [manager.requestSerializer setValue:checksum forHTTPHeaderField:@"CheckSum"];
    [manager.bareLined recognize:checksum water:StringFromTailData(&appAcceptEvent)];


    //: NSURLSessionDataTask *task = [manager POST:urlStr parameters:params headers:nil progress:^(NSProgress * _Nonnull uploadProgress) {
    NSURLSessionDataTask *task = [manager needScenarioPrompt:urlStr disable:params execute:nil modify:^(NSProgress * _Nonnull uploadProgress) {

    //: } success:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) {
    } comparisonUponPlayer:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) {
        //: success(responseObject);
        success(responseObject);
    //: } failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) {
    } asSunny:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) {
        //: failed(nil ,error);
        failed(nil ,error);
    //: }];
    }];
    //: [[ElevatedNativeRecoverAllocator sharedManager] addTask:task];
    [[ElevatedNativeRecoverAllocator thoroughWealthy] among:task];
}

//: - (NSMutableDictionary *)taskQueue{
- (NSMutableDictionary *)compose{
//    NSMutableDictionary *taskDic = objc_getAssociatedObject(self, @selector(addTask:));
//
//    if (!taskDic) {
//        taskDic = @{}.mutableCopy;
//        objc_setAssociatedObject(self, @selector(addTask:), taskDic, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
//    }
//    return taskDic;
    //: return nil;
    return nil;
}

//: - (void)cancelRequest{
- (void)supply{

    //: if ([self ifRequesting]) {
    if ([self spaceOpen]) {
        //: NSMutableDictionary *taskDic = [[ElevatedNativeRecoverAllocator sharedManager] taskQueue];
        NSMutableDictionary *taskDic = [[ElevatedNativeRecoverAllocator thoroughWealthy] compose];
        //HMLog(@"----没有结束的队列====%lu", (unsigned long)taskDic.allKeys.count);

        //: [taskDic enumerateKeysAndObjectsUsingBlock:^(id _Nonnull key, id _Nonnull obj, BOOL * _Nonnull stop) {
        [taskDic enumerateKeysAndObjectsUsingBlock:^(id _Nonnull key, id _Nonnull obj, BOOL * _Nonnull stop) {
            //: if (((NSURLSessionDataTask *)obj).state != NSURLSessionTaskStateCompleted) {
            if (((NSURLSessionDataTask *)obj).state != NSURLSessionTaskStateCompleted) {
                //: [((NSURLSessionDataTask *)obj) cancel];
                [((NSURLSessionDataTask *)obj) cancel];
            }
        //: }];
        }];
    }
}

//: + (void)uploadFileWithURL:(NSString *)URL
+ (void)noGlobe:(NSString *)URL
               //: parameters:(id)parameters
               shrinkMission:(id)parameters
                     //: name:(NSString *)name
                     topic:(NSString *)name
                 //: filePath:(NSURL *)filePath
                 praiseAcross:(NSURL *)filePath
                 //: progress:(HttpProgress)progress
                 composition:(HttpProgress)progress
                  //: success:(ResponseSuccess)success
                  technology:(ResponseSuccess)success
                   //: failed:(ResponseFailed)failed{
                   stone:(ResponseFailed)failed{


    //: if (![URL containsString:@"http"]){
    if (![URL containsString:StringFromTailData(&userEndlessKey)]){
        //: URL = RestApi(URL);
        URL = preciseImage(URL);
    }

    //: AFHTTPSessionManager *manager = [ElevatedNativeRecoverAllocator sharedManager].manager;
    AFHTTPSessionManager *manager = [ElevatedNativeRecoverAllocator thoroughWealthy].relatedLoose;

    //: NSURLSessionDataTask *t = [manager POST:URL parameters:parameters headers:nil constructingBodyWithBlock:^(id<AFMultipartFormData> _Nonnull formData) {
    NSURLSessionDataTask *t = [manager seek:URL random:parameters inspector:nil hourDownSpecial:^(id<AFMultipartFormData> _Nonnull formData) {
        //: NSError *error = nil;
        NSError *error = nil;
        //: [formData appendPartWithFileURL:filePath name:name error:&error];
        [formData random:filePath sunSpeed:name margin:&error];
        //: (failed && error) ? failed(nil ,error) : nil;
        (failed && error) ? failed(nil ,error) : nil;
    //: } progress:^(NSProgress * _Nonnull uploadProgress) {
    } planGraph:^(NSProgress * _Nonnull uploadProgress) {
        //: dispatch_sync(dispatch_get_main_queue(), ^{
        dispatch_sync(dispatch_get_main_queue(), ^{//上传进度
            //: progress ? progress(uploadProgress) : nil;
            progress ? progress(uploadProgress) : nil;
        //: });
        });
    //: } success:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) {
    } belowError:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) {
        //: success ? success(responseObject) : nil;
        success ? success(responseObject) : nil;

    //: } failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) {
    } precious:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) {
        //: failed ? failed(nil ,error) : nil;
        failed ? failed(nil ,error) : nil;
    //: }];
    }];
    //: [[ElevatedNativeRecoverAllocator sharedManager] addTask:t];
    [[ElevatedNativeRecoverAllocator thoroughWealthy] among:t];
}


/**
 *不验证https 不验证时
 */
//: + (AFSecurityPolicy *)defaultSecurityPolicy{
+ (AFSecurityPolicy *)coordinate{
    //: AFSecurityPolicy *securityPolicy = [AFSecurityPolicy policyWithPinningMode:AFSSLPinningModeNone];
    AFSecurityPolicy *securityPolicy = [AFSecurityPolicy tab:AFSSLPinningModeNone];
    //: securityPolicy.allowInvalidCertificates = YES;
    securityPolicy.bravePressured = YES;
    //: securityPolicy.validatesDomainName = NO;
    securityPolicy.commandTwisted = NO;
    //: return securityPolicy;
    return securityPolicy;
}




//: + (void)postWithUrl: (NSString *)urlStr
+ (void)guide: (NSString *)urlStr
             //: params: (NSDictionary *)params
             visual: (NSDictionary *)params
             //: isShow: (BOOL)isShow
             detailed: (BOOL)isShow
            //: success: (ResponseSuccess)success
            exist: (ResponseSuccess)success
             //: failed: (ResponseFailed)failed{
             state: (ResponseFailed)failed{

    //: if (![urlStr containsString:@"http"]){
    if (![urlStr containsString:StringFromTailData(&userEndlessKey)]){
        //: urlStr = RestApi(urlStr);
        urlStr = preciseImage(urlStr);
    }

    //: [self postWithUrl:urlStr params:params isShow:isShow cacheTime:0 mustResrush:YES success:success failed:failed];
    [self stick:urlStr yard:params genuine:isShow muse:0 strikeOn:YES off:success engineActive:failed];
}




//: + (void)uploadVideoWithURL:(NSString *)URL
+ (void)grain:(NSString *)URL
                 //: parameters:(id)parameters
                 chain:(id)parameters
                     //: images:(NSData *)videoData
                     equipment:(NSData *)videoData
                 //: coverImage:(NSData *)coverData
                 strongSimple:(NSData *)coverData
                   //: progress:(HttpProgress)progress
                   radar:(HttpProgress)progress
                    //: success:(ResponseSuccess)success
                    realm:(ResponseSuccess)success
                     //: failed:(ResponseFailed)failed{
                     hidden:(ResponseFailed)failed{

    //: if (![URL containsString:@"http"]){
    if (![URL containsString:StringFromTailData(&userEndlessKey)]){
        //: URL = RestApi(URL);
        URL = preciseImage(URL);
    }

    //: AFHTTPSessionManager *manager = [ElevatedNativeRecoverAllocator sharedManager].manager;
    AFHTTPSessionManager *manager = [ElevatedNativeRecoverAllocator thoroughWealthy].relatedLoose;
    //: NSURLSessionDataTask *t = [manager POST:URL parameters:parameters headers:nil constructingBodyWithBlock:^(id<AFMultipartFormData> _Nonnull formData) {
    NSURLSessionDataTask *t = [manager seek:URL random:parameters inspector:nil hourDownSpecial:^(id<AFMultipartFormData> _Nonnull formData) {

        //: NSString *timeSp = [NSString stringWithFormat:@"%ld", (long)[[NSDate date] timeIntervalSince1970]];
        NSString *timeSp = [NSString stringWithFormat:@"%ld", (long)[[NSDate date] timeIntervalSince1970]];
        //: NSString *fileName = [NSString stringWithFormat:@"%@.mp4",timeSp];
        NSString *fileName = [NSString stringWithFormat:StringFromTailData(&componentOntoEstimatePlatform),timeSp];
        //: NSString *mimeType = @"video/mp4";
        NSString *mimeType = StringFromTailData(&globalProtectLoopValue);
        //: [formData appendPartWithFileData:videoData name:@"video" fileName:fileName mimeType:mimeType];
        [formData gravity:videoData via:StringFromTailData(&userHillTimer) manEvaluate:fileName beforeWithoutCreate:mimeType];
        //: [formData appendPartWithFileData:coverData name:@"picture" fileName:[NSString stringWithFormat:@"%@.jpg",timeSp] mimeType:@"image/jpg"];
        [formData gravity:coverData via:StringFromTailData(&k_reverseUniversalTimer) manEvaluate:[NSString stringWithFormat:StringFromTailData(&userResumePreference),timeSp] beforeWithoutCreate:StringFromTailData(&themeOutputPlatform)];
    //: } progress:^(NSProgress * _Nonnull uploadProgress) {
    } planGraph:^(NSProgress * _Nonnull uploadProgress) {
        //: if (progress) {
        if (progress) {
            //: progress(uploadProgress);
            progress(uploadProgress);
        }
    //: } success:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) {
    } belowError:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) {

        //: success ? success(responseObject) : nil;
        success ? success(responseObject) : nil;
    //: } failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) {
    } precious:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) {
        //: failed ? failed(nil ,error) : nil;
        failed ? failed(nil ,error) : nil;
    //: }];
    }];

    //: [[ElevatedNativeRecoverAllocator sharedManager] addTask:t];
    [[ElevatedNativeRecoverAllocator thoroughWealthy] among:t];
}

//: - (id)init{
- (id)init{
    //: if (self = [super init]) {
    if (self = [super init]) {
        //: AFSecurityPolicy *securityPolicy = [ElevatedNativeRecoverAllocator defaultSecurityPolicy];
        AFSecurityPolicy *securityPolicy = [ElevatedNativeRecoverAllocator coordinate];
        //: _manager = [AFHTTPSessionManager manager];
        _relatedLoose = [AFHTTPSessionManager central];
        //: _manager.securityPolicy = securityPolicy;
        _relatedLoose.availableFrommed = securityPolicy;
        //: _manager.responseSerializer.acceptableContentTypes = [NSSet setWithObjects:@"application/json", @"text/json", @"text/javascript",@"text/plain",@"text/html", nil];
        _relatedLoose.serverAgreementsing.reachCabled = [NSSet setWithObjects:StringFromTailData(&globalMediaFormat), StringFromTailData(&moduleEnsureEvent), StringFromTailData(&styleSternSpringPath),StringFromTailData(&viewCircuitError),StringFromTailData(&viewReportNumber), nil];
        //_dbQueue = [[HMDBManager shareManager] dbQueue];

    }
    //: return self;
    return self;
}

//取消网络请求
//: + (void)cancelRequestWithURLString:(NSString *)URLString{
+ (void)deep:(NSString *)URLString{

//    if ([[HMDataRequest shareDataRequest] ifRequesting]) {
//        NSMutableDictionary *taskDic = [[HMDataRequest shareDataRequest] taskQueue];
//        //HMLog(@"----没有结束的队列====%lu", (unsigned long)taskDic.allKeys.count);
//
//        [taskDic enumerateKeysAndObjectsUsingBlock:^(id  _Nonnull key, id  _Nonnull obj, BOOL * _Nonnull stop) {
//
//            if (((NSURLSessionDataTask *)obj).state != NSURLSessionTaskStateCompleted
//                && [[((NSURLSessionDataTask *)obj).currentRequest.URL absoluteString] rangeOfString:URLString].location != NSNotFound) {
//
//                HMLog(@"----end----%@", [((NSURLSessionDataTask *)obj).currentRequest.URL absoluteString]);
//
//                [((NSURLSessionDataTask *)obj) cancel];
//
//            }
//        }];
//    }


}

//: + (instancetype)sharedManager{
+ (instancetype)thoroughWealthy{
    //: static ElevatedNativeRecoverAllocator *sharedManager = nil;
    static ElevatedNativeRecoverAllocator *sharedManager = nil;
    //: static dispatch_once_t onceToken;
    static dispatch_once_t onceToken;
    //: _dispatch_once(&onceToken, ^{
    _dispatch_once(&onceToken, ^{
        //: sharedManager = [ElevatedNativeRecoverAllocator new];
        sharedManager = [ElevatedNativeRecoverAllocator new];
    //: });
    });
    //: return sharedManager;
    return sharedManager;
}

//: + (void)getWithUrl:(NSString *)urlStr
+ (void)opinion:(NSString *)urlStr
            //: params:(NSDictionary *)params
            greatBy:(NSDictionary *)params
            //: isShow:(BOOL)isShow
            quantityeract:(BOOL)isShow
           //: success:(ResponseSuccess)success
           monster:(ResponseSuccess)success
            //: failed:(ResponseFailed)failed{
            provisionDoing:(ResponseFailed)failed{

    //: if (![urlStr containsString:@"http"]){
    if (![urlStr containsString:StringFromTailData(&userEndlessKey)]){
        //: urlStr = RestApi(urlStr);
        urlStr = preciseImage(urlStr);
    }

    //: [self getWithUrl:urlStr params:params isShow:isShow cacheTime:0 mustResrush:YES success:success failed:failed];
    [self magnitude:urlStr will:params anWeave:isShow announcement:0 towardMaximum:YES forwardMission:success regionTo:failed];
}

//: + (void)getWithUrl: (NSString *)urlStr
+ (void)magnitude: (NSString *)urlStr
            //: params: (NSDictionary *)params
            will: (NSDictionary *)params
            //: isShow: (BOOL)isShow
            anWeave: (BOOL)isShow
         //: cacheTime: (int)cacheDuration
         announcement: (int)cacheDuration
       //: mustResrush: (BOOL)mustResrush
       towardMaximum: (BOOL)mustResrush
           //: success: (ResponseSuccess)success
           forwardMission: (ResponseSuccess)success
            //: failed: (ResponseFailed)failed{
            regionTo: (ResponseFailed)failed{

    //: if (isShow) {
    if (isShow) {
            //: [FontVentureOrderly show];
            [FontVentureOrderly recoverFade];
        }
    //: AFHTTPSessionManager *manager = [ElevatedNativeRecoverAllocator sharedManager].manager;
    AFHTTPSessionManager *manager = [ElevatedNativeRecoverAllocator thoroughWealthy].relatedLoose;
    //添加请求头
    //: NSString *loginToken = [GestureSubscribeDropHero standardUserDefaults].loginToken;
    NSString *loginToken = [GestureSubscribeDropHero available].joinBarPage;
    //: NSString *lang = emptyString([GestureSubscribeDropHero standardUserDefaults].language);
    NSString *lang = soundFound([GestureSubscribeDropHero available].grainChecker);
    //: [manager.requestSerializer setValue:lang forHTTPHeaderField:@"lang"];
    [manager.bareLined recognize:lang water:StringFromTailData(&layoutClipRealmTimer)];
    //: NSString *systemLanguage = [[NSLocale preferredLanguages] firstObject];
    NSString *systemLanguage = [[NSLocale preferredLanguages] firstObject];
    //: [manager.requestSerializer setValue:systemLanguage forHTTPHeaderField:@"langs"];
    [manager.bareLined recognize:systemLanguage water:StringFromTailData(&layoutPropertyPreference)];

    //: if ([GestureSubscribeDropHero standardUserDefaults].loginToken.length > 0) {
    if ([GestureSubscribeDropHero available].joinBarPage.length > 0) {

        //: [manager.requestSerializer setValue:loginToken forHTTPHeaderField:@"token"];
        [manager.bareLined recognize:loginToken water:StringFromTailData(&viewWillingExceptionString)];
    }
    //: NSURLSessionDataTask *task = [manager GET:urlStr parameters:params headers:nil progress:^(NSProgress * _Nonnull downloadProgress) {
    NSURLSessionDataTask *task = [manager magnitudeegrate:urlStr transfer:params complex:nil remainOf:^(NSProgress * _Nonnull downloadProgress) {

    //: } success:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) {
    } stern:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) {

        //: if (![urlStr containsString:@"systemSetting"] && ![urlStr containsString:@"loginip"] && ![urlStr containsString:@"appSetting"] && ![urlStr containsString:@"ismustmobile"]) {
        if (![urlStr containsString:StringFromTailData(&constConstructSubmitPath)] && ![urlStr containsString:StringFromTailData(&constPageDecentName)] && ![urlStr containsString:StringFromTailData(&kPassageModeMessage)] && ![urlStr containsString:StringFromTailData(&commonPowerEvent)]) {
         }
        //: if (isShow) {
        if (isShow) {
            //: [FontVentureOrderly dismissWithDelay:0.25];
            [FontVentureOrderly port:0.25];
        }
        //: success(responseObject);
        success(responseObject);
    //: } failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) {
    } form:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) {
        //: if (isShow) {
        if (isShow) {
            //: [FontVentureOrderly dismissWithDelay:0.25];
            [FontVentureOrderly port:0.25];
        }
        //: failed(nil ,error);
        failed(nil ,error);
    //: }];
    }];
    //: [[ElevatedNativeRecoverAllocator sharedManager] addTask:task];
    [[ElevatedNativeRecoverAllocator thoroughWealthy] among:task];
}

//: @end
@end

Byte *TailDataToByte(TailData *data) {
    if (data->eliteYear < 109) return data->spaceChapter;
    for (int i = 0; i < data->buildFilter; i++) {
        data->spaceChapter[i] ^= data->resolvePositive;
    }
    data->spaceChapter[data->buildFilter] = 0;
    data->eliteYear = 39;
	if (data->buildFilter >= 2) {
		data->pleasedCheckShore = data->spaceChapter[0];
		data->optionTransit = data->spaceChapter[1];
	}
    return data->spaceChapter;
}

NSString *StringFromTailData(TailData *data) {
    return [NSString stringWithUTF8String:(char *)TailDataToByte(data)];
}
